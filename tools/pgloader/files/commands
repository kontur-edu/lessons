load database
	from mssql://ulearn:ulearn@host.docker.internal/ulearn
	into postgresql://ulearn:ulearn@host.docker.internal:5432/ulearn

set work_mem to '64MB', maintenance_work_mem to '512 MB'

WITH include no drop, no truncate, reset sequences, create no schemas, create no tables, create no indexes, no foreign keys, quote identifiers, data only

cast
	type datetime2 to timestamp,
	type datetime to timestamp,
	type int to integer,
	type varchar when (<= precision 4000) to varchar keep typemod,
	type nvarchar when (<= precision 4000) to varchar keep typemod

--including only table names like '%' in schema 'antiplagiarism'
--including only table names like '%' in schema 'dbo'
--excluding table names like 'AspNetRoleClaims', 'AspNetUserTokens', '__EFMigrationsHistory', '__MigrationHistory' in schema 'dbo'

alter schema 'dbo' rename to 'public'
;